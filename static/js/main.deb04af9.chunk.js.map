{"version":3,"sources":["api/containers/demotavator/style.module.scss","api/image-search/constants.js","api/image-search/image-search.js","api/containers/demotavator/demotivator.js","api/containers/app/App.js","reportWebVitals.js","index.js"],"names":["module","exports","searchHost","searchApi","searchEndpoints","searchImage","q","options","method","url","params","safeSearch","pageNumber","pageSize","headers","axios","request","Demotivator","useState","value","setValue","text","secondText","demotivator","setDemotivator","loading","setLoading","isShow","setIsShow","showRepeat","setShowRepeat","error","setError","nicolas","getRandom","max","Math","floor","random","prepareData","words","a","imagesUrl","i","length","storageWord","localStorage","getItem","searchRes","imgUrl","data","push","setItem","addImageProcess","src","Promise","resolve","reject","img","Image","onload","onerror","this","images","speak","myText","replace","synth","window","speechSynthesis","textMatch","matchAll","seconds","split","map","l","tilda","forEach","match","index","join","filter","w","replaceAll","utterThis","SpeechSynthesisUtterance","lang","rate","addEventListener","e","name","slice","charIndex","charLength","image","imageContainer","document","querySelector","innerHTML","appendChild","setImage","className","s","load","demotivatorContainer","imgContainer","id","textContainer","secondTextContainer","buttonContainer","onClick","inputBack","inputContainer","title","style","fontSize","placeholder","onChange","target","schemeRu","schemeEng","scheme","toLowerCase","test","toEnglish","setTimeout","then","res","show","color","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.deb04af9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"load\":\"style_load__2kv9T\",\"title\":\"style_title__L09bT\",\"inputBack\":\"style_inputBack__1r4a7\",\"inputContainer\":\"style_inputContainer__3E0PA\",\"demotivatorContainer\":\"style_demotivatorContainer__2-qgz\",\"demotivator\":\"style_demotivator__1NVS9\",\"imgContainer\":\"style_imgContainer__qYOFR\",\"textContainer\":\"style_textContainer__2n76D\",\"secondTextContainer\":\"style_secondTextContainer__WglzF\",\"buttonContainer\":\"style_buttonContainer__1Wl9J\"};","export const searchHost = 'contextualwebsearch-websearch-v1.p.rapidapi.com';\r\nexport const searchApi = `https://${searchHost}/api`;\r\nexport const searchKey = 'c3a0de9521msh1a72b70684bdda7p12b153jsn8c66979e4eea';\r\n\r\nexport const searchEndpoints = {\r\n    imageSearch: '/Search/ImageSearchAPI'\r\n}","import axios from \"axios\";\r\nimport {searchApi, searchEndpoints, searchHost, searchKey} from \"./constants\";\r\n\r\nexport const searchImage = (q) => {\r\n    const options = {\r\n        method: 'GET',\r\n        url: `${searchApi}${searchEndpoints.imageSearch}`,\r\n        params: {safeSearch: true, pageNumber: '1', pageSize: '1', q},\r\n        headers: {\r\n            'x-rapidapi-key': searchKey,\r\n            'x-rapidapi-host': searchHost\r\n        }\r\n    };\r\n\r\n    return axios.request(options);\r\n}","import {useState} from \"react\";\r\nimport {searchImage} from \"../../image-search/image-search\";\r\nimport s from \"./style.module.scss\";\r\n\r\nexport const Demotivator = () => {\r\n    const [value, setValue] = useState('');\r\n    const [demotivator, setDemotivator] = useState({text: '', secondText: ''});\r\n    const [loading, setLoading] = useState(false);\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [showRepeat, setShowRepeat] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const nicolas = ['https://www.film.ru/sites/default/files/filefield_paths/1517047575_nicolas-cage-nicolas-cage-26969948-1989-1300.jpg',\r\n        'https://icdn.lenta.ru/images/2017/07/24/09/20170724090548799/detail_436b3d755101963b4cc3b620ef01d7cb.jpg',\r\n        'https://1.bp.blogspot.com/-KlXcCpI8ilk/XhuYfNP_BNI/AAAAAAAAFNA/VANw-wSRB8IbxDQGziBIJ-KYsnblnxlMACEwYBhgL/s1600/3.jpg']\r\n\r\n    const setImage = (image) => {\r\n        const imageContainer = document.querySelector('#image');\r\n        imageContainer.innerHTML = '';\r\n        imageContainer.appendChild(image);\r\n    }\r\n\r\n    const toEnglish = (text) => {\r\n        const schemeRu = ['а', 'б', 'в', 'г', 'д', 'е', 'ё', 'ж', 'з', 'и', 'й', 'к', 'л', 'м', 'н', 'о', 'п', 'р', 'с',\r\n            'т', 'у', 'ф', 'х', 'ц', 'ч', 'ш', 'щ', 'ъ', 'ы', 'ь', 'э', 'ю', 'я', ' '];\r\n        const schemeEng = ['a', 'b', 'v', 'g', 'd', 'e', 'e', 'j', 'z', 'i', 'y', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's',\r\n            't', 'u', 'f', 'h', 'ts', 'ch', 'sh', 'sch', '', 'i', '', 'e', 'u', 'ya', ' '];\r\n        const scheme = {};\r\n        for (let i = 0; i < schemeRu.length; i++) {\r\n            scheme[schemeRu[i]] = schemeEng[i];\r\n        }\r\n        return text.toLowerCase().split('').map(l => scheme[l] ?? (/\\w/.test(l) ? l : '')).join('');\r\n    }\r\n\r\n    const getRandom = (max) => {\r\n        return Math.floor(Math.random() * max);\r\n    }\r\n\r\n    const prepareData = async (words) => {\r\n        const imagesUrl = [];\r\n        for (let i = 0; i < words.length; i++) {\r\n            const storageWord = localStorage.getItem(words[i]);\r\n            if (!storageWord) {\r\n                const searchRes = await searchImage(words[i]);\r\n                const imgUrl = searchRes.data?.value.length ? searchRes.data.value[0].url : nicolas[getRandom(nicolas.length)];\r\n                imagesUrl.push(imgUrl);\r\n                localStorage.setItem(words[i], imgUrl);\r\n            } else {\r\n                imagesUrl.push(storageWord);\r\n            }\r\n        }\r\n\r\n        const addImageProcess = (src) => {\r\n            return new Promise((resolve, reject) => {\r\n                let img = new Image()\r\n                img.onload = () => resolve(img)\r\n                img.onerror = function () {\r\n                    this.src = nicolas[getRandom(nicolas.length)]\r\n                }\r\n                img.src = src\r\n            })\r\n        }\r\n\r\n        const images = [];\r\n        for (let i = 0; i < imagesUrl.length; i++) {\r\n            images.push(await addImageProcess(imagesUrl[i]));\r\n        }\r\n\r\n        return images;\r\n    }\r\n\r\n    const speak = (text, images) => {\r\n        const myText = text.replace(/\\([^\\(]*\\)/gm, '');\r\n        const synth = window.speechSynthesis;\r\n\r\n        const textMatch = [...text.matchAll(/\\([^\\(]*\\)/gm)];\r\n        const newText = text.split('').map((l, i) => {\r\n            let tilda = false;\r\n            textMatch.forEach(match => {\r\n                if (l === ' ' && i > match.index && i < (match.index + match[0].length)) {\r\n                    tilda = true;\r\n                }\r\n            });\r\n            return tilda ? '~' : l;\r\n        }).join('');\r\n\r\n        const seconds = newText.split(' ').filter(w => w.length).map(w => {\r\n            const match = w.match(/\\(.*\\)/);\r\n            return match ? (match[0].replace(/\\(|\\)/gm, '').replaceAll('~', ' ') ?? '') : '';\r\n        });\r\n\r\n        const utterThis = new SpeechSynthesisUtterance(myText);\r\n        utterThis.lang = 'ru-RU';\r\n        utterThis.rate = 0.6;\r\n\r\n        let i = 0;\r\n        utterThis.addEventListener('boundary', (e) => {\r\n            if (e.name === 'word') {\r\n                setDemotivator({\r\n                    text: myText.slice(e.charIndex, e.charIndex + e.charLength),\r\n                    secondText: seconds[i]\r\n                });\r\n                setImage(images[i]);\r\n                i++;\r\n            }\r\n        })\r\n\r\n        utterThis.addEventListener('end', () => {\r\n            setShowRepeat(true);\r\n        })\r\n\r\n        synth.speak(utterThis);\r\n    }\r\n\r\n    const show = (text) => {\r\n        const words = toEnglish(text.replace(/\\([^\\(]*\\)/gm, '')).split(/\\s/gm).filter(w => w.length);\r\n\r\n        if (words.length > 10) {\r\n            setError(true);\r\n            setTimeout(() => setError(false), 2000);\r\n        } else {\r\n            setLoading(true);\r\n            setIsShow(true);\r\n\r\n            prepareData(words).then((res) => {\r\n                setLoading(false);\r\n                speak(text, res);\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!loading ? (\r\n                <>\r\n                    {!isShow ? (\r\n                        <div className={s.inputBack}>\r\n                            <div className={s.inputContainer}>\r\n                                <div className={s.title}>ДЕНИНТЕНДАТОР<span style={{fontSize: '50px'}}>v.0.1</span></div>\r\n                                <textarea placeholder='Введите текст...' value={value} onChange={(e) => setValue(e.target.value)}/>\r\n                                <button onClick={() => show(value)}>ДЕМОТИВИРОВАТЬ!</button>\r\n                                {error && (\r\n                                    <div style={{color: 'red'}}>\r\n                                        Введите не более 10 слов\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {demotivator.text.length ? (\r\n                                <>\r\n                                    <div className={s.demotivatorContainer}>\r\n                                        <div className={s.demotivator}>\r\n                                            <div className={s.imgContainer} id='image'>\r\n                                            </div>\r\n                                            <div className={s.textContainer}>\r\n                                                {demotivator.text}\r\n                                            </div>\r\n                                            <div className={s.secondTextContainer}>\r\n                                                {demotivator.secondText}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={s.buttonContainer}>\r\n                                        {showRepeat && (\r\n                                            <button onClick={() => {\r\n                                                setIsShow(false);\r\n                                                setShowRepeat(false)\r\n                                                setDemotivator({text: '', secondText: ''})\r\n                                            }}>ПОВТОРИТЬ</button>\r\n                                        )\r\n                                        }\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <></>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <div className={s.load}>loading...</div>\r\n            )}\r\n        </div>\r\n    )\r\n}","import './App.css';\nimport {Demotivator} from \"../demotavator/demotivator\";\n\nfunction App() {\n    return (\n        <div className='App'>\n            <Demotivator/>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './api/containers/app/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}