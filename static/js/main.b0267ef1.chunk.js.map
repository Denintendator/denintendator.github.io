{"version":3,"sources":["containers/demotavator-show/styles.module.scss","api/image-search/constants.js","components/demotivator/demotivator.js","containers/demotavator-show/demotivator-show.js","api/image-search/image-search.js","containers/app/App.js","reportWebVitals.js","index.js","components/demotivator/styles.module.scss"],"names":["module","exports","Demotivator","text","secondText","children","className","s","demotivator","imgContainer","textContainer","secondTextContainer","DemotivatorShow","useState","value","setValue","setDemotivator","loading","setLoading","isShow","setIsShow","showRepeat","setShowRepeat","error","setError","nicolas","getRandom","max","Math","floor","random","prepareData","words","a","imagesUrl","i","length","storageWord","localStorage","getItem","q","axios","post","searchRes","imgUrl","data","push","setItem","addImageProcess","src","Promise","resolve","reject","img","Image","onload","onerror","this","images","speak","myText","replace","synth","window","speechSynthesis","textMatch","matchAll","seconds","split","map","l","tilda","forEach","match","index","join","filter","w","replaceAll","utterThis","SpeechSynthesisUtterance","lang","rate","addEventListener","e","name","slice","charIndex","charLength","image","imageContainer","document","querySelector","innerHTML","appendChild","setImage","load","demotivatorContainer","id","buttonContainer","onClick","inputBack","inputContainer","title","style","fontSize","placeholder","onChange","target","schemeRu","schemeEng","scheme","toLowerCase","test","toEnglish","setTimeout","then","res","show","color","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"qIACAA,EAAOC,QAAU,CAAC,KAAO,qBAAqB,MAAQ,sBAAsB,qBAAuB,qCAAqC,UAAY,0BAA0B,eAAiB,+BAA+B,gBAAkB,kC,6JCA1N,kBADI,kDACJ,Q,sCCCTC,EAAc,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,KAAMC,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,SAC3C,OACI,sBAAKC,UAAWC,IAAEC,YAAlB,UACI,qBAAKF,UAAWC,IAAEE,aAAlB,SACKJ,IAEL,qBAAKC,UAAWC,IAAEG,cAAlB,SACKP,IAEL,qBAAKG,UAAWC,IAAEI,oBAAlB,SACKP,QCPJQ,EAAkB,WAC3B,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAsCF,mBAAS,CAACV,KAAM,GAAIC,WAAY,KAAtE,mBAAOI,EAAP,KAAoBQ,EAApB,KACA,EAA8BH,oBAAS,GAAvC,mBAAOI,EAAP,KAAgBC,EAAhB,KACA,EAA4BL,oBAAS,GAArC,mBAAOM,EAAP,KAAeC,EAAf,KACA,EAAoCP,oBAAS,GAA7C,mBAAOQ,EAAP,KAAmBC,EAAnB,KACA,EAA0BT,oBAAS,GAAnC,mBAAOU,EAAP,KAAcC,EAAd,KACMC,EAAU,CAAC,sHACb,2GACA,wHAoBEC,EAAY,SAACC,GACf,OAAOC,KAAKC,MAAMD,KAAKE,SAAWH,IAGhCI,EAAW,uCAAG,WAAOC,GAAP,+BAAAC,EAAA,sDACVC,EAAY,GACTC,EAAI,EAFG,YAEAA,EAAIH,EAAMI,QAFV,oBAGNC,EAAcC,aAAaC,QAAQP,EAAMG,IAHnC,iCCnCIK,EDwCwBR,EAAMG,GC3B/CM,IAAMC,KAAK,8CAA+C,CAC7DvC,KAAMqC,IDqBU,OAKFG,EALE,OAMFC,GAAS,UAAAD,EAAUE,YAAV,eAAgB1C,MAAOwC,EAAUE,KAAK1C,KAAOsB,EAAQC,EAAUD,EAAQW,SACtFF,EAAUY,KAAKF,GACfN,aAAaS,QAAQf,EAAMG,GAAIS,GARvB,wBAURV,EAAUY,KAAKT,GAVP,QAEkBF,IAFlB,uBAcVa,EAAkB,SAACC,GACrB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzB,IAAIC,EAAM,IAAIC,MACdD,EAAIE,OAAS,kBAAMJ,EAAQE,IAC3BA,EAAIG,QAAU,WACVC,KAAKR,IAAMxB,EAAQC,EAAUD,EAAQW,UAEzCiB,EAAIJ,IAAMA,MAIZS,EAAS,GACNvB,EAAI,EA1BG,aA0BAA,EAAID,EAAUE,QA1Bd,6BA2BZsB,EA3BY,UA2BMV,EAAgBd,EAAUC,IA3BhC,yBA2BLW,KA3BK,wBA0BsBX,IA1BtB,iDA8BTuB,GA9BS,kCCnCG,IAAClB,IDmCJ,OAAH,sDAiCXmB,EAAQ,SAACxD,EAAMuD,GACjB,IAAME,EAASzD,EAAK0D,QAAQ,eAAgB,IACtCC,EAAQC,OAAOC,gBAEfC,EAAS,YAAO9D,EAAK+D,SAAS,iBAW9BC,EAVUhE,EAAKiE,MAAM,IAAIC,KAAI,SAACC,EAAGnC,GACnC,IAAIoC,GAAQ,EAMZ,OALAN,EAAUO,SAAQ,SAAAC,GACJ,MAANH,GAAanC,EAAIsC,EAAMC,OAASvC,EAAKsC,EAAMC,MAAQD,EAAM,GAAGrC,SAC5DmC,GAAQ,MAGTA,EAAQ,IAAMD,KACtBK,KAAK,IAEgBP,MAAM,KAAKQ,QAAO,SAAAC,GAAC,OAAIA,EAAEzC,UAAQiC,KAAI,SAAAQ,GAAM,IAAD,EACxDJ,EAAQI,EAAEJ,MAAM,UACtB,OAAOA,GAAK,UAAIA,EAAM,GAAGZ,QAAQ,UAAW,IAAIiB,WAAW,IAAK,YAApD,QAAkE,MAG5EC,EAAY,IAAIC,yBAAyBpB,GAC/CmB,EAAUE,KAAO,QACjBF,EAAUG,KAAO,GAEjB,IAAI/C,EAAI,EACR4C,EAAUI,iBAAiB,YAAY,SAACC,GACrB,SAAXA,EAAEC,OACFrE,EAAe,CACXb,KAAMyD,EAAO0B,MAAMF,EAAEG,UAAWH,EAAEG,UAAYH,EAAEI,YAChDpF,WAAY+D,EAAQhC,KApFnB,SAACsD,GACd,IAAMC,EAAiBC,SAASC,cAAc,UAC9CF,EAAeG,UAAY,GAC3BH,EAAeI,YAAYL,GAmFnBM,CAASrC,EAAOvB,IAChBA,QAIR4C,EAAUI,iBAAiB,OAAO,WAC9B7D,GAAc,MAGlBwC,EAAMH,MAAMoB,IAoBhB,OACI,8BACM9D,EA0CE,qBAAKX,UAAWC,IAAEyF,KAAlB,wBAzCA,mCACM7E,EAcE,mCACKX,EAAYL,KAAKiC,OACd,qCACI,qBAAK9B,UAAWC,IAAE0F,qBAAlB,SACI,cAAC,EAAD,2BAAiBzF,GAAjB,aACI,qBAAK0F,GAAG,eAGhB,qBAAK5F,UAAWC,IAAE4F,gBAAlB,SACK9E,GACG,wBAAQ+E,QAAS,WACbhF,GAAU,GACVE,GAAc,GACdN,EAAe,CAACb,KAAM,GAAIC,WAAY,MAH1C,yEAUZ,+BAjCR,qBAAKE,UAAWC,IAAE8F,UAAlB,SACI,sBAAK/F,UAAWC,IAAE+F,eAAlB,UACI,sBAAKhG,UAAWC,IAAEgG,MAAlB,2FAAsC,sBAAMC,MAAO,CAACC,SAAU,QAAxB,sBACtC,0BAAUC,YAAY,+EAAmB5F,MAAOA,EAAO6F,SAAU,SAACvB,GAAD,OAAOrE,EAASqE,EAAEwB,OAAO9F,UAC1F,wBAAQsF,QAAS,kBA1BhC,SAACjG,GACV,IAAM6B,EA7FQ,SAAC7B,GAMf,IALA,IAAM0G,EAAW,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SACxG,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,KACpEC,EAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACzG,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MAAO,GAAI,IAAK,GAAI,IAAK,IAAK,KAAM,KACxEC,EAAS,GACN5E,EAAI,EAAGA,EAAI0E,EAASzE,OAAQD,IACjC4E,EAAOF,EAAS1E,IAAM2E,EAAU3E,GAEpC,OAAOhC,EAAK6G,cAAc5C,MAAM,IAAIC,KAAI,SAAAC,GAAC,uBAAIyC,EAAOzC,UAAX,QAAkB,KAAK2C,KAAK3C,GAAKA,EAAI,MAAKK,KAAK,IAoF1EuC,CAAU/G,EAAK0D,QAAQ,eAAgB,KAAKO,MAAM,QAAQQ,QAAO,SAAAC,GAAC,OAAIA,EAAEzC,UAElFJ,EAAMI,OAAS,IACfZ,GAAS,GACT2F,YAAW,kBAAM3F,GAAS,KAAQ,OAElCN,GAAW,GACXE,GAAU,GAEVW,EAAYC,GAAOoF,MAAK,SAACC,GACrBnG,GAAW,GACXyC,EAAMxD,EAAMkH,OAc2BC,CAAKxG,IAA5B,mGACCS,GACG,qBAAKiF,MAAO,CAACe,MAAO,OAApB,0IEnIrBC,MARf,WACI,OACI,qBAAKlH,UAAU,MAAf,SACI,cAAC,EAAD,OCMGmH,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBP,MAAK,YAAkD,IAA/CQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFxC,SAASyC,eAAe,SAM1BX,K,kBCfAzH,EAAOC,QAAU,CAAC,YAAc,4BAA4B,aAAe,6BAA6B,cAAgB,8BAA8B,oBAAsB,uC","file":"static/js/main.b0267ef1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"load\":\"styles_load__3DBq-\",\"title\":\"styles_title__3JzFI\",\"demotivatorContainer\":\"styles_demotivatorContainer__3AlRF\",\"inputBack\":\"styles_inputBack__5KXBY\",\"inputContainer\":\"styles_inputContainer__5W_cs\",\"buttonContainer\":\"styles_buttonContainer__r4cNs\"};","export const searchHost = 'contextualwebsearch-websearch-v1.p.rapidapi.com';\r\nexport const searchApi = `https://${searchHost}/api`;\r\nexport const searchKey = 'c3a0de9521msh1a72b70684bdda7p12b153jsn8c66979e4eea';\r\n\r\nexport const searchEndpoints = {\r\n    imageSearch: '/Search/ImageSearchAPI'\r\n}","import s from \"./styles.module.scss\";\r\n\r\nexport const Demotivator = ({text, secondText, children}) => {\r\n    return (\r\n        <div className={s.demotivator}>\r\n            <div className={s.imgContainer}>\r\n                {children}\r\n            </div>\r\n            <div className={s.textContainer}>\r\n                {text}\r\n            </div>\r\n            <div className={s.secondTextContainer}>\r\n                {secondText}\r\n            </div>\r\n        </div>\r\n    );\r\n}","import {useState} from \"react\";\r\nimport {searchImage} from \"../../api/image-search/image-search\";\r\nimport s from \"./styles.module.scss\";\r\nimport {Demotivator} from \"../../components/demotivator/demotivator\";\r\n\r\nexport const DemotivatorShow = () => {\r\n    const [value, setValue] = useState('');\r\n    const [demotivator, setDemotivator] = useState({text: '', secondText: ''});\r\n    const [loading, setLoading] = useState(false);\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [showRepeat, setShowRepeat] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const nicolas = ['https://www.film.ru/sites/default/files/filefield_paths/1517047575_nicolas-cage-nicolas-cage-26969948-1989-1300.jpg',\r\n        'https://icdn.lenta.ru/images/2017/07/24/09/20170724090548799/detail_436b3d755101963b4cc3b620ef01d7cb.jpg',\r\n        'https://1.bp.blogspot.com/-KlXcCpI8ilk/XhuYfNP_BNI/AAAAAAAAFNA/VANw-wSRB8IbxDQGziBIJ-KYsnblnxlMACEwYBhgL/s1600/3.jpg']\r\n\r\n    const setImage = (image) => {\r\n        const imageContainer = document.querySelector('#image');\r\n        imageContainer.innerHTML = '';\r\n        imageContainer.appendChild(image);\r\n    }\r\n\r\n    const toEnglish = (text) => {\r\n        const schemeRu = ['а', 'б', 'в', 'г', 'д', 'е', 'ё', 'ж', 'з', 'и', 'й', 'к', 'л', 'м', 'н', 'о', 'п', 'р', 'с',\r\n            'т', 'у', 'ф', 'х', 'ц', 'ч', 'ш', 'щ', 'ъ', 'ы', 'ь', 'э', 'ю', 'я', ' '];\r\n        const schemeEng = ['a', 'b', 'v', 'g', 'd', 'e', 'e', 'j', 'z', 'i', 'y', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's',\r\n            't', 'u', 'f', 'h', 'ts', 'ch', 'sh', 'sch', '', 'i', '', 'e', 'u', 'ya', ' '];\r\n        const scheme = {};\r\n        for (let i = 0; i < schemeRu.length; i++) {\r\n            scheme[schemeRu[i]] = schemeEng[i];\r\n        }\r\n        return text.toLowerCase().split('').map(l => scheme[l] ?? (/\\w/.test(l) ? l : '')).join('');\r\n    }\r\n\r\n    const getRandom = (max) => {\r\n        return Math.floor(Math.random() * max);\r\n    }\r\n\r\n    const prepareData = async (words) => {\r\n        const imagesUrl = [];\r\n        for (let i = 0; i < words.length; i++) {\r\n            const storageWord = localStorage.getItem(words[i]);\r\n            if (!storageWord) {\r\n                const searchRes = await searchImage(words[i]);\r\n                const imgUrl = searchRes.data?.text ? searchRes.data.text : nicolas[getRandom(nicolas.length)];\r\n                imagesUrl.push(imgUrl);\r\n                localStorage.setItem(words[i], imgUrl);\r\n            } else {\r\n                imagesUrl.push(storageWord);\r\n            }\r\n        }\r\n\r\n        const addImageProcess = (src) => {\r\n            return new Promise((resolve, reject) => {\r\n                let img = new Image()\r\n                img.onload = () => resolve(img)\r\n                img.onerror = function () {\r\n                    this.src = nicolas[getRandom(nicolas.length)]\r\n                }\r\n                img.src = src\r\n            })\r\n        }\r\n\r\n        const images = [];\r\n        for (let i = 0; i < imagesUrl.length; i++) {\r\n            images.push(await addImageProcess(imagesUrl[i]));\r\n        }\r\n\r\n        return images;\r\n    }\r\n\r\n    const speak = (text, images) => {\r\n        const myText = text.replace(/\\([^\\(]*\\)/gm, '');\r\n        const synth = window.speechSynthesis;\r\n\r\n        const textMatch = [...text.matchAll(/\\([^\\(]*\\)/gm)];\r\n        const newText = text.split('').map((l, i) => {\r\n            let tilda = false;\r\n            textMatch.forEach(match => {\r\n                if (l === ' ' && i > match.index && i < (match.index + match[0].length)) {\r\n                    tilda = true;\r\n                }\r\n            });\r\n            return tilda ? '~' : l;\r\n        }).join('');\r\n\r\n        const seconds = newText.split(' ').filter(w => w.length).map(w => {\r\n            const match = w.match(/\\(.*\\)/);\r\n            return match ? (match[0].replace(/\\(|\\)/gm, '').replaceAll('~', ' ') ?? '') : '';\r\n        });\r\n\r\n        const utterThis = new SpeechSynthesisUtterance(myText);\r\n        utterThis.lang = 'ru-RU';\r\n        utterThis.rate = 0.6;\r\n\r\n        let i = 0;\r\n        utterThis.addEventListener('boundary', (e) => {\r\n            if (e.name === 'word') {\r\n                setDemotivator({\r\n                    text: myText.slice(e.charIndex, e.charIndex + e.charLength),\r\n                    secondText: seconds[i]\r\n                });\r\n                setImage(images[i]);\r\n                i++;\r\n            }\r\n        })\r\n\r\n        utterThis.addEventListener('end', () => {\r\n            setShowRepeat(true);\r\n        })\r\n\r\n        synth.speak(utterThis);\r\n    }\r\n\r\n    const show = (text) => {\r\n        const words = toEnglish(text.replace(/\\([^\\(]*\\)/gm, '')).split(/\\s/gm).filter(w => w.length);\r\n\r\n        if (words.length > 20) {\r\n            setError(true);\r\n            setTimeout(() => setError(false), 2000);\r\n        } else {\r\n            setLoading(true);\r\n            setIsShow(true);\r\n\r\n            prepareData(words).then((res) => {\r\n                setLoading(false);\r\n                speak(text, res);\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!loading ? (\r\n                <>\r\n                    {!isShow ? (\r\n                        <div className={s.inputBack}>\r\n                            <div className={s.inputContainer}>\r\n                                <div className={s.title}>ДЕНИНТЕНДАТОР<span style={{fontSize: '50px'}}>v.0.2</span></div>\r\n                                <textarea placeholder='Введите текст...' value={value} onChange={(e) => setValue(e.target.value)}/>\r\n                                <button onClick={() => show(value)}>ДЕМОТИВИРОВАТЬ!</button>\r\n                                {error && (\r\n                                    <div style={{color: 'red'}}>\r\n                                        Введите не более 20 слов\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {demotivator.text.length ? (\r\n                                <>\r\n                                    <div className={s.demotivatorContainer}>\r\n                                        <Demotivator {...demotivator}>\r\n                                            <div id='image'/>\r\n                                        </Demotivator>\r\n                                    </div>\r\n                                    <div className={s.buttonContainer}>\r\n                                        {showRepeat && (\r\n                                            <button onClick={() => {\r\n                                                setIsShow(false);\r\n                                                setShowRepeat(false)\r\n                                                setDemotivator({text: '', secondText: ''})\r\n                                            }}>ПОВТОРИТЬ</button>\r\n                                        )\r\n                                        }\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <></>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <div className={s.load}>loading...</div>\r\n            )}\r\n        </div>\r\n    )\r\n}","import axios from \"axios\";\r\nimport {searchApi, searchEndpoints, searchHost, searchKey} from \"./constants\";\r\n\r\nexport const searchImage = (q) => {\r\n    // const options = {\r\n    //     method: 'GET',\r\n    //     url: `${searchApi}${searchEndpoints.imageSearch}`,\r\n    //     params: {safeSearch: true, pageNumber: '1', pageSize: '1', q},\r\n    //     headers: {\r\n    //         'x-rapidapi-key': searchKey,\r\n    //         'x-rapidapi-host': searchHost\r\n    //     }\r\n    // };\r\n\r\n    // return axios.request(options);\r\n\r\n    return axios.post('https://meme-api-jade.vercel.app/api/getimg', {\r\n        text: q\r\n    });\r\n}","import './App.css';\nimport {DemotivatorShow} from \"../demotavator-show/demotivator-show\";\n\nfunction App() {\n    return (\n        <div className='App'>\n            <DemotivatorShow/>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/app/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"demotivator\":\"styles_demotivator__3KPcH\",\"imgContainer\":\"styles_imgContainer__7hFRR\",\"textContainer\":\"styles_textContainer__A8R6s\",\"secondTextContainer\":\"styles_secondTextContainer__2BPSI\"};"],"sourceRoot":""}